<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>位图&amp;布隆过滤器&amp;海量数据 | Lu Jingxiang's blog</title><meta name="author" content="Lu Jingxiang"><meta name="copyright" content="Lu Jingxiang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="位图&amp;布隆过滤器&amp;海量数据面试题 【哈希的应用】 BitSet概念及自定义实现：位图：有些资料叫bitMap 给40亿个不重复的无符号整数，没排过序。给一个无符号整数，如何快速判断一个数是否在这40亿个数中。【腾讯】 40亿个字节 4个G 40亿个整数 16G 解法一：遍历 时间复杂度 O(N) 解法二：排序 + 二分查找 O(N*logN+logN)  面临问题 内存放不下 用位">
<meta property="og:type" content="article">
<meta property="og:title" content="位图&amp;布隆过滤器&amp;海量数据">
<meta property="og:url" content="http://example.com/2024/02/25/%E4%BD%8D%E5%9B%BE-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8-%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE/index.html">
<meta property="og:site_name" content="Lu Jingxiang&#39;s blog">
<meta property="og:description" content="位图&amp;布隆过滤器&amp;海量数据面试题 【哈希的应用】 BitSet概念及自定义实现：位图：有些资料叫bitMap 给40亿个不重复的无符号整数，没排过序。给一个无符号整数，如何快速判断一个数是否在这40亿个数中。【腾讯】 40亿个字节 4个G 40亿个整数 16G 解法一：遍历 时间复杂度 O(N) 解法二：排序 + 二分查找 O(N*logN+logN)  面临问题 内存放不下 用位">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-02-25T12:51:36.000Z">
<meta property="article:modified_time" content="2024-02-26T01:36:38.427Z">
<meta property="article:author" content="Lu Jingxiang">
<meta property="article:tag" content="数据结构">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/02/25/%E4%BD%8D%E5%9B%BE-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8-%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '位图&布隆过滤器&海量数据',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-26 09:36:38'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="Lu Jingxiang's blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Lu Jingxiang's blog"><span class="site-name">Lu Jingxiang's blog</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">位图&amp;布隆过滤器&amp;海量数据</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-02-25T12:51:36.000Z" title="发表于 2024-02-25 20:51:36">2024-02-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-26T01:36:38.427Z" title="更新于 2024-02-26 09:36:38">2024-02-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="位图&amp;布隆过滤器&amp;海量数据"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="位图-布隆过滤器-海量数据面试题-【哈希的应用】"><a href="#位图-布隆过滤器-海量数据面试题-【哈希的应用】" class="headerlink" title="位图&amp;布隆过滤器&amp;海量数据面试题 【哈希的应用】"></a>位图&amp;布隆过滤器&amp;海量数据面试题 【哈希的应用】</h2><hr>
<h4 id="BitSet概念及自定义实现："><a href="#BitSet概念及自定义实现：" class="headerlink" title="BitSet概念及自定义实现："></a>BitSet概念及自定义实现：</h4><p>位图：有些资料叫bitMap</p>
<p>给40亿个不重复的无符号整数，没排过序。给一个无符号整数，如何快速判断一个数是否在这40亿个数<br>中。【腾讯】</p>
<p>40亿个字节 4个G</p>
<p>40亿个整数 16G</p>
<p>解法一：遍历 时间复杂度 O(N)</p>
<p>解法二：排序 + 二分查找 O(N*logN+logN)  面临问题 内存放不下</p>
<p>用位来存储数据 一个位表示一个数 0表示不存在 1表示存在</p>
<p>一个字节 8 个比特位 </p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402252050603.png" alt="CT-20240223084327"></p>
<p>内存的利用效率非常高</p>
<p>40亿个不重复的无符号整型用位图存储 –》 存储空间512MB</p>
<p>实现位图 byte[]</p>
<p>arrayIndex &#x3D; num&#x2F;8 数组的下标</p>
<p>num % 8 求出数据在具体数组位置的下标</p>
<p>所谓位图，就是用每一位来存放某种状态，适用于海量数据，整数，数据无重复的场景。通常是用来判<br>断某个数据存不存在的。</p>
<p>源码用的是long[]. 这里我们用的是byte[]</p>
<p>用相应的映射关系表示状态</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kongmin_123/article/details/82225172?utm_term=bitset%E5%AE%9E%E7%8E%B0java&utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~sobaiduweb~default-1-82225172&spm=3001.4430">BitSet的实现原理博客</a></p>
<p><strong>自定义BitSet代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> HighOrderDS;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> test1215.UserNeighborhood;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.BitSet;</span><br><span class="line"><span class="keyword">import</span> java.util.StringJoiner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBitSet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] elem;</span><br><span class="line">    <span class="comment">//记录当前位图当中存在了多少个有效的数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> usedSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBitSet</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.elem = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定位数初始化位图</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 表示需要多少个位</span></span><br><span class="line"><span class="comment">     * 有可能会多给一个字节 但是无所谓</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBitSet</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.elem = <span class="keyword">new</span> <span class="title class_">byte</span>[n/<span class="number">8</span>+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置某一位为1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> val 对应的数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">int</span> val)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(val &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">arrayIndex</span> <span class="operator">=</span> val/<span class="number">8</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">bitIndex</span> <span class="operator">=</span> val%<span class="number">8</span>;</span><br><span class="line">        <span class="comment">//如果arrayIndex 比 数组长度要大 或者等于数组长度了 此时就需要扩容了 不然会发生数组越界</span></span><br><span class="line">        <span class="keyword">if</span>(arrayIndex &gt;= elem.length)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//扩容</span></span><br><span class="line">            <span class="built_in">this</span>.elem = Arrays.copyOf(elem, arrayIndex + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//要精确到位 这里就要使用位运算 用或来插入新数据 同时不会损失旧数据</span></span><br><span class="line">        elem[arrayIndex] |= (<span class="type">byte</span>) (<span class="number">1</span>&lt;&lt;bitIndex); <span class="comment">//不能进行异或 逻辑上错误</span></span><br><span class="line">        <span class="comment">//比如插入12 12/8 = 1 12 %8 = 4</span></span><br><span class="line">        <span class="comment">//原本elem[1] = 0 0 0 0 0 0 0 0</span></span><br><span class="line">        <span class="comment">//1用byte表示 0 0 0 0 0 0 0 1</span></span><br><span class="line">        <span class="comment">//要将1变为4 左移4位即可</span></span><br><span class="line">        <span class="comment">//4: 0 0 0 1 0 0 0 0</span></span><br><span class="line">        <span class="comment">//或运算之后得 0 0 0 1 0 0 0 0</span></span><br><span class="line">        usedSize++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//记录当前位图中记录的元素的个数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUsedSize</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> usedSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断当前位 是不是1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> val 位数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> val)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//检查这一位是1还是0</span></span><br><span class="line">        <span class="comment">//1存在 0不存在</span></span><br><span class="line">        <span class="keyword">if</span>(val &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">arrayIndex</span> <span class="operator">=</span> val /<span class="number">8</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">bitIndex</span> <span class="operator">=</span> val %<span class="number">8</span>;</span><br><span class="line">        <span class="keyword">if</span>(arrayIndex &gt;= elem.length)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span> <span class="variable">tmp</span> <span class="operator">=</span> (<span class="type">byte</span>) (<span class="number">1</span>&lt;&lt;bitIndex);</span><br><span class="line">        <span class="comment">//这里进行与运算 结果 放到tmp中</span></span><br><span class="line">        tmp &amp;= elem[arrayIndex];</span><br><span class="line">        <span class="comment">//不为0 就表示这一位是存在的</span></span><br><span class="line">        <span class="keyword">return</span> tmp != <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 把某一位重置为0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> val 位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reset</span><span class="params">(<span class="type">int</span> val)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(val &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">arrayIndex</span> <span class="operator">=</span> val /<span class="number">8</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">bitIndex</span> <span class="operator">=</span> val %<span class="number">8</span>;</span><br><span class="line">        <span class="keyword">if</span>(arrayIndex &gt;= elem.length)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//异或不行 假设原来这个地方原来就是0 现在反而还把他改成1了</span></span><br><span class="line">        <span class="type">byte</span> <span class="variable">tmp</span> <span class="operator">=</span> (<span class="type">byte</span>) (<span class="number">1</span>&lt;&lt;bitIndex);</span><br><span class="line">        <span class="comment">//按位取反操作</span></span><br><span class="line">        <span class="comment">//假设要重置的位是12 12 %8 = 4 12/8 =1</span></span><br><span class="line">        <span class="comment">//elem[1] = 0 0 0 1 0 0 0 0</span></span><br><span class="line">        <span class="comment">//tmp = 0 0 0 1 0 0 0 0</span></span><br><span class="line">        <span class="comment">//~tmp = 1 1 1 0 1 1 1 1</span></span><br><span class="line">        <span class="comment">//进行与运算 得到 0 0 0 0 0 0 0 0 指定位置重置成功</span></span><br><span class="line">        tmp = (<span class="type">byte</span>) ~tmp;</span><br><span class="line">        elem[arrayIndex] &amp;= tmp;</span><br><span class="line">        usedSize--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用位图给数据排序 也就是输出</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">StringJoiner</span> <span class="variable">sj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringJoiner</span>(<span class="string">&quot;, &quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="comment">//排序 升序序列</span></span><br><span class="line">        <span class="comment">//遍历字节数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; elem.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">8</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>((elem[i] &amp; (<span class="number">1</span>&lt;&lt;j))!=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//说明该位置上存在数 那么输出 该比特位为1</span></span><br><span class="line">                    sj.add(String.valueOf(i*<span class="number">8</span>+j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sj.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> []array = &#123;<span class="number">78</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">33</span>,<span class="number">20</span>,<span class="number">17</span>,<span class="number">66</span>,<span class="number">1</span>,<span class="number">23</span>,<span class="number">52</span>&#125;;</span><br><span class="line">        <span class="type">MyBitSet</span> <span class="variable">bitSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBitSet</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            bitSet.set(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(bitSet);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="BitSet的应用："><a href="#BitSet的应用：" class="headerlink" title="BitSet的应用："></a>BitSet的应用：</h4><ol>
<li>快速查找某个数据是否在一个集合中（BitSet查找某一个元素是否存在极快，整个操作下来只需要O(N),且建立好了集合）</li>
<li>排序 + 去重 （插入时重复的元素只会保留一个 排序 直接按照位置输出）</li>
<li>求两个集合的交集、并集等 （去重性）</li>
<li>操作系统中磁盘块标记</li>
</ol>
<hr>
<h4 id="布隆过滤器："><a href="#布隆过滤器：" class="headerlink" title="布隆过滤器："></a>布隆过滤器：</h4><p>一般来讲，计算机中的集合是用哈希表（hash table）来存储的。它的好处是快速准确，缺点是费存储空<br>间。当集合比较小时，这个问题不显著，但是当集合巨大时，哈希表存储效率低的问题就显现出来了。</p>
<ol>
<li>用哈希表存储用户记录，缺点：浪费空间</li>
<li>用位图存储用户记录，缺点：位图一般只能处理整形，如果内容编号是字符串，就无法处理了。</li>
<li>将哈希与位图结合，即布隆过滤器</li>
</ol>
<p>布隆过滤器是由布隆（Burton Howard Bloom）在1970年提出的 一种紧凑型的、比较巧妙的概率型数据结<br>构，特点是高效地插入和查询，可以用来告诉你 &#x3D;&#x3D;“某样东西一定不存在或者可能存在”&#x3D;&#x3D;，它是用&#x3D;&#x3D;多个哈希函&#x3D;&#x3D;<br>&#x3D;&#x3D;数&#x3D;&#x3D;，将一个数据映射到位图结构中。此种方式不仅可以提升查询效率，也可以节省大量的内存空间。</p>
<p>为什么不是一定存在？</p>
<p>字符串通过多个hash函数 映射到相关位置 改变相关位置状态码 （存放）</p>
<p>此时再来一个字符串 我要确认是否存在这个词 那我就用之前对应的多个hash函数去映射到相关位置 看状态码 如果状态码均为1 则这个词是可能存在的（因为之前存放的时候 或者 现在查找的时候 可能会有hash碰撞）</p>
<p>如果找到对应状态码为0 – 》 这个词是一定不在数据集中的</p>
<p>确定存在的时候 –〉 可能会产生误判 （因此 有一个误判域）</p>
<p>为什么这里要多个hash函数？ 目的就是为了避免hash冲突</p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402252050604.png" alt="布隆过滤器的可能性"></p>
<p>布隆过滤器 没有存储当前的数据</p>
<p>传统的布隆过滤器 不支持删除操作 因为删除就是重置对应的状态码 但是可能会出现hash碰撞 因此就是会把其他的字符串可能也删除</p>
<hr>
<h3 id="自己实现一个布隆过滤器"><a href="#自己实现一个布隆过滤器" class="headerlink" title="自己实现一个布隆过滤器"></a>自己实现一个布隆过滤器</h3><p>布隆过滤器 插入 和 查找 的实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> HighOrderDS;</span><br><span class="line"><span class="keyword">import</span> java.util.BitSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBloomFilter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SimpleHash</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> cap;<span class="comment">//当前容量</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> seed;<span class="comment">//随机种子</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">SimpleHash</span><span class="params">(<span class="type">int</span> cap,<span class="type">int</span> seed)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">this</span>.cap = cap;</span><br><span class="line">            <span class="built_in">this</span>.seed = seed;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据seed的不同  创建不同的hash函数</span></span><br><span class="line">        <span class="type">int</span> <span class="title function_">hash</span><span class="params">(String key)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> h;</span><br><span class="line">            <span class="comment">//这里是要得到一个hash值</span></span><br><span class="line">            <span class="comment">//seed*(cap-1) 这里不一样 那么生成的hash函数也就不一样</span></span><br><span class="line">            <span class="keyword">return</span> (key == <span class="literal">null</span> )? <span class="number">0</span> : seed*(cap-<span class="number">1</span>) &amp; ((h = key.hashCode())^(h&gt;&gt;&gt;<span class="number">16</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认的位图容量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_SIZE</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//位图</span></span><br><span class="line">    <span class="keyword">public</span> BitSet bitSet;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//记录存储了多少个数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> usedSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//随机种子 hash函数多个</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> []seeds = &#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">27</span>,<span class="number">33</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//存储hash函数的数组</span></span><br><span class="line">    <span class="keyword">public</span> SimpleHash[] simpleHashes;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBloomFilter</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        bitSet = <span class="keyword">new</span> <span class="title class_">BitSet</span>(DEFAULT_SIZE);</span><br><span class="line">        <span class="comment">//hash函数的个数 主要是由 位图容量 和 随机种子个数共同决定的</span></span><br><span class="line">        simpleHashes = <span class="keyword">new</span> <span class="title class_">SimpleHash</span>[seeds.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; simpleHashes.length; i++) &#123;</span><br><span class="line">            simpleHashes[i] = <span class="keyword">new</span> <span class="title class_">SimpleHash</span>(DEFAULT_SIZE,seeds[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加元素 到布隆过滤器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> val</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String val)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//让3个hash函数分别处理当前的数据</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; simpleHashes.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">bitIndex</span> <span class="operator">=</span> simpleHashes[i].hash(val);</span><br><span class="line">            <span class="comment">//把他们都存储在位图当中即可</span></span><br><span class="line">            bitSet.set(bitIndex);</span><br><span class="line">            usedSize++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否包含val。这里会存在一定的误判</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> val</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(String val)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//查看val时 也是根据这几个hash函数 看对应的位置状态</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; simpleHashes.length; i++) &#123;</span><br><span class="line">            <span class="comment">//只要有一个为0 那么肯定不存在</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">bitIndex</span> <span class="operator">=</span> simpleHashes[i].hash(val);</span><br><span class="line">            <span class="keyword">if</span>(!bitSet.get(bitIndex))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//时间复杂度 O(1)</span></span><br><span class="line">        <span class="type">MyBloomFilter</span> <span class="variable">myBloomFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBloomFilter</span>();</span><br><span class="line">        myBloomFilter.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        myBloomFilter.add(<span class="string">&quot;hello2&quot;</span>);</span><br><span class="line">        myBloomFilter.add(<span class="string">&quot;bit&quot;</span>);</span><br><span class="line">        myBloomFilter.add(<span class="string">&quot;haha&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(myBloomFilter.usedSize);<span class="comment">//4 *6 = 24 共映射了24次</span></span><br><span class="line">        System.out.println(myBloomFilter.contains(<span class="string">&quot;hello&quot;</span>));</span><br><span class="line">        System.out.println(myBloomFilter.contains(<span class="string">&quot;hello3&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> HighOrderDS;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.hash.BloomFilter;</span><br><span class="line"><span class="keyword">import</span> com.google.common.hash.Funnels;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试google提供的布隆过滤器 误判率</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BloomFilterTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">1000000</span>;<span class="comment">//预计要插入多少数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span> <span class="variable">fpp</span> <span class="operator">=</span> <span class="number">0.01</span>;<span class="comment">//期望的误判率</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size, fpp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//插入数据</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//添加到 布隆过滤器</span></span><br><span class="line">            bloomFilter.put(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//理论上 这些数据不会出现在布隆过滤器当中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1000000</span>; i &lt; <span class="number">2000000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (bloomFilter.mightContain(i)) &#123;</span><br><span class="line">                count++;</span><br><span class="line">                System.out.println(i + <span class="string">&quot;误判了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//最后误判了10314 符合期望的误判率 以后布隆过滤器就用google提供的包</span></span><br><span class="line">        System.out.println(<span class="string">&quot;总共的误判数:&quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="布隆过滤器的删除："><a href="#布隆过滤器的删除：" class="headerlink" title="布隆过滤器的删除："></a>布隆过滤器的删除：</h3><p>布隆过滤器不能直接支持删除工作，因为在删除一个元素时，可能会影响其他元素。<br>比如：删除上图中”tencent”元素，如果直接将该元素所对应的二进制比特位置0，“baidu”元素也被删除了，<br>因为这两个元素在多个哈希函数计算出的比特位上刚好有重叠。<br>一种支持删除的方法：将布隆过滤器中的每个比特位扩展成一个小的计数器，插入元素时给k个计数器(k个哈<br>希函数计算出的哈希地址)加一，删除元素时，给k个计数器减一，通过多占用几倍存储空间的代价来增加删<br>除操作。<br>缺陷：</p>
<ol>
<li>无法确认元素是否真正在布隆过滤器中【会有误判】</li>
<li>存在计数回绕【回绕意思为：溢出】（比特位的角度）</li>
</ol>
<hr>
<h3 id="布隆过滤器的优点"><a href="#布隆过滤器的优点" class="headerlink" title="布隆过滤器的优点"></a>布隆过滤器的优点</h3><ol>
<li>增加和查询元素的时间复杂度为:O(K), (K为哈希函数的个数，一般比较小)，与数据量大小无关</li>
<li>哈希函数相互之间没有关系，方便硬件并行运算</li>
<li>布隆过滤器不需要存储元素本身，在某些对保密要求比较严格的场合有很大优势</li>
<li>在能够承受一定的误判时，布隆过滤器比其他数据结构有这很大的空间优势</li>
<li>数据量很大时，布隆过滤器可以表示全集，其他数据结构不能（数据量很大的时候 其他数据结构不能存储全部元素 只有位图和布隆过滤器可以存储 可以极大地节省空间）</li>
<li>使用同一组散列函数的布隆过滤器可以进行交、并、差运算</li>
</ol>
<hr>
<h3 id="布隆过滤器缺陷"><a href="#布隆过滤器缺陷" class="headerlink" title="布隆过滤器缺陷"></a>布隆过滤器缺陷</h3><ol>
<li>有误判率，即存在假阳性(False Position)，即不能准确判断元素是否在集合中(补救方法：再建立一个白<br>名单，存储可能会误判的数据)</li>
<li>不能获取元素本身</li>
<li>一般情况下不能从布隆过滤器中删除元素</li>
<li>如果采用计数方式删除，可能会存在计数回绕问题</li>
</ol>
<hr>
<h3 id="布隆过滤器的使用场景："><a href="#布隆过滤器的使用场景：" class="headerlink" title="布隆过滤器的使用场景："></a>布隆过滤器的使用场景：</h3><ol>
<li><p>google的guava包中有对Bloom Filter的实现（已经实现好的布隆过滤器）</p>
</li>
<li><p>网页爬虫对URL的去重，避免爬去相同的URL地址。（可以确定不在已经爬过的url地址集合中）</p>
</li>
<li><p>垃圾邮件过滤，从数十亿个垃圾邮件列表中判断某邮箱是否是垃圾邮箱。（可以确定不在垃圾邮箱集合中）<br>String s3 &#x3D; “金轮法王”;<br>String s4 &#x3D; “霍都”;<br>BloomFilter filter&#x3D;new BloomFilter();<br>filter.set(s1);<br>filter.set(s2);<br>filter.set(s3);<br>filter.set(s4);<br>System.out.println(filter.contains(“杨过”));<br>System.out.println(filter.contains(“金轮法王”));<br>}<br>}</p>
</li>
<li><p>解决数据库缓存击穿，黑客攻击服务器时，会构建大量不存在于缓存中的key向服务器发起请求，在数<br>据量足够大的时候，频繁的数据库查询会导致挂机。（可以确定不存在于缓存中的key）</p>
</li>
<li><p>秒杀系统，查看用户是否重复购买（可以确定用户没有购买记录）</p>
</li>
</ol>
<hr>
<h3 id="简单总结一下："><a href="#简单总结一下：" class="headerlink" title="简单总结一下："></a>简单总结一下：</h3><p>位图：适合处理整数，大量数据，查找&#x2F;排序&#x2F;去重 但是如果不是整数，此时就需要使用布隆过滤器</p>
<p>布隆过滤器：适合一些非整数的 使用哈希+位图结合来做的，查找的时间复杂度和哈希函数的个数有关系 不存储关键信息 有误判的！！！ 他能确定谁一定不在 但是 谁在？ 是有一定的误判率的</p>
<hr>
<h3 id="海量数据面试题："><a href="#海量数据面试题：" class="headerlink" title="海量数据面试题："></a>海量数据面试题：</h3><h5 id="哈希切割："><a href="#哈希切割：" class="headerlink" title="哈希切割："></a>哈希切割：</h5><p>给一个超过100G大小的log file, log中存着IP地址, 设计算法找到出现次数最多的IP地址？ 与上题条件相同，<br>如何找到top K的IP？</p>
<p>​	内存当中不能存下100G的数据</p>
<p>​	通常的如果忽略大小 我们可以统计每个IP出现的次数 我们可以使用K，V结构来解决这个题 但是问题目前是100G的数据太大了，一次性是无法加载到内容当中的</p>
<p>思路：尝试把当前这一个文件 给拆分成若干个小文件 问题就是要如何拆分呢？</p>
<p>均分的思路是不可以的 均分会出现一个情况 一个文件当中 最多的IP地址 不一定就是整体上最多的IP地址。所以不可以均分 均分的是数量 不是根据IP地址的内容均分的（既然不可以根据内容均分 目标：是否能将相同的IP存储到同一个文件当中？ 如果能做到 就可以解决这个问题）</p>
<p>正确思路：</p>
<ol>
<li><p>IP本身就是一个字符串而已 先把IP变成一个整数 hash(IP) </p>
</li>
<li><p>文件的下标index  &#x3D; hash(IP) % 200</p>
</li>
</ol>
<p>每一份就分为了500MB </p>
<p>好处 会把相同的字符串映射到 同一个文件当中的</p>
<ol start="3">
<li>读取每个文件的内容，统计每个文件当中，IP出现的次数 Map记录下来</li>
</ol>
<hr>
<h5 id="位图应用："><a href="#位图应用：" class="headerlink" title="位图应用："></a>位图应用：</h5><ol>
<li>给定100亿个整数，设计算法找到只出现一次的整数？</li>
</ol>
<p>这里会有重复的数据 100亿个整数 大约 40G的内存</p>
<p>解法1:哈希切割：</p>
<p>把数字 哈希到 对应的小文件当中 一样的数字 肯定是在一起的 遍历每个小文件 统计数字出现的次数 此时 在内存当中就可以知道 哪个数字出现了一次</p>
<p>解法2:位图</p>
<p>42亿比特位 大约是 512M</p>
<p>42亿&#x2F;8&#x2F;1024&#x2F;1024 &#x3D; 512M</p>
<p>没出现 0 0</p>
<p>出现1次 0 1</p>
<p>出现2次 1 0</p>
<p>出现3次以上 1 1</p>
<p>用两个位图来表示相应位置的第一位和第二位</p>
<p>所以要求出只有一次的数  那就直接用两个位图 如果相应位置 一个位图的比特位为1 一个位图的比特位为0，那么就是只出现了一次</p>
<p>解法3: 使用一个位图</p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402252050605.png" alt="一个位图的解法"></p>
<p>面试的时候这种题目极其多</p>
<ol start="2">
<li>给两个文件，分别有100亿个整数，我们只有1G内存，如何找到两个文件交集？</li>
</ol>
<p>​	100亿 –》 就是40个G</p>
<p>​	解法一： 哈希切割</p>
<p>​	第一步：哈希切割 相同的数全部哈希到相同的文件中 （分成小文件），两个文件都用相同的哈希函数</p>
<p>​	第二步：相同的下标文件 求交集 交集再重新组成大文件  就是交集</p>
<p>​	解法二：位图</p>
<pre><code>1. 先遍历第一个文件 降低一个文件数据读取出来 存放在bitySet当中
1. 遍历第二个文件 每次读一个数据 就看bitSet当中 之前是否存在
1. 如果存在 就是交集
</code></pre>
<p>两个bitSet 按位与 就直接是交集 按位或 就直接是并集 差集 就直接按位异或（不同的位就置一）</p>
<ol start="3">
<li>位图应用变形：1个文件有100亿个int，1G内存，设计算法找到出现次数不超过2次的所有整数</li>
</ol>
<p>解法一：哈希切割</p>
<p>解法二；使用两个位图 两个BItSet对应的位上 不要出现2个1的就好 0次的也不能统计</p>
<hr>
<h5 id="布隆过滤器：-1"><a href="#布隆过滤器：-1" class="headerlink" title="布隆过滤器："></a>布隆过滤器：</h5><ol>
<li>给两个文件，分别有100亿个query，我们只有1G内存，如何找到两个文件交集？分别给出精确算法和<br>近似算法</li>
</ol>
<p>近似算法 有一定概率 –》 布隆过滤器去做 </p>
<p>精确算法 哈希切割 </p>
<p>假设一个query 平均10个byte 1000亿个字节 –》 93个G</p>
<p>两个文件都分别切割成小文件 分别对应求交集</p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402252050606.png" alt="精确算法求交集"></p>
<p>近似算法 ： 把第一个文件当中的query映射到布隆过滤器当中 </p>
<p>读第二个文件 每个query 都去布隆过滤器去查找</p>
<p>找到了才有可能是交集 找不到那铁定不是交集 （存在误判 有可能没存在 但被误判为有）</p>
<ol start="2">
<li>如何扩展BloomFilter使得它支持删除元素的操作</li>
</ol>
<hr>
<p>拓展：</p>
<p><a target="_blank" rel="noopener" href="http://my.oschina.net/zhenglingfei/blog/405622">一致性哈希</a>（应用在分布式系统当中）</p>
<p>hash%N N代表了缓存服务器的数量 如果N发生了改变 那么此时就会缓存雪崩</p>
<p>一致性hash算法：哈希环 一致性hash算法是对2^32取模</p>
<p>接着将各个服务器使用IP地址 主机名作为关键字进行hash 确定每台机子在hash环的位置</p>
<p>最后使用算法定位数据访问到对应的服务器 将数据key使用相同的函数hash计算出hash值吗，并确定此数据在环上的位置 沿环顺时针寻找 第一台遇到的服务器就是应该定位到的服务器</p>
<ol>
<li><p>我们可以认为 这个哈希环是由2^32个点组成的</p>
</li>
<li><p>根据hash(key) % 2^32 确定服务器在哈希环的位置</p>
</li>
<li><p>将数据缓存到hash环上 hash(图片名称) % 2^32</p>
</li>
</ol>
<p>假设此时B服务器坏掉了 在B服务器上缓存的数据 就会落到下一个服务器 </p>
<p>一致性算法节点的增减都只需重定位环空间中的一小部分数量</p>
<p>2^32 更加均匀 在环上的哪一个地方都有可能</p>
<p>hash环会倾斜 不理想情况下 会出现服务器紧挨在一起 </p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402260936536.png" alt="哈希环倾斜"></p>
<p>ABC三台机器负载极不均衡 这种情况如果A出现故障 存储在A的数据会大量转移到B上 可能会导致节点B的崩溃 节点B崩溃之后 A，B的所有水会想节点C迁移导致节点C也崩溃 最终导致整个集群宕机 这种情况称为<strong>雪崩效应</strong></p>
<p>解决办法 –》 虚拟节点 </p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402260936537.png" alt="虚拟节点"></p>
<p>WEB服务器 Nginx-〉就用到了负载均衡的思想</p>
<p>可以再多多扩展阅读 一致性hash和负载均衡</p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/leoo2sk/archive/2010/10/01/hash-and-encrypt.html">哈希与加密</a></p>
<p>哈希算法是不可逆的 加密算法是可逆的</p>
<p>hash将目标文本 转换成长度相同 不可逆的杂凑的字符串</p>
<p>加密是将目标文本转换成具有不同长度的 可逆的密文 （长度与明文的长度有关）</p>
<p>md5加密 - 》可以逆向推导</p>
<p>彩虹表 搜集到的常用的加密表</p>
<p>如果被保护数据仅仅用做比较认真 在以后不需要还原成铭文形式 则使用hash 如果被保护的数据在以后需要被还原成明文 则需要使用加密</p>
<p>最常用的哈希算法 是MD5 （广泛使用散列函数）</p>
<p>加盐： “1b2i3t4e “ 123456-&gt; bi123456te  除非知道我的盐是什么？</p>
<p>也可以加随机盐 BcryptPasswordEncoder 类</p>
<p>密码越长 破解的难度就越高</p>
<p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402260936538.png"></p>
<hr>
<h3 id="板书："><a href="#板书：" class="headerlink" title="板书："></a>板书：</h3><p><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402252050607.png" alt="2022-07-11-位图+布隆过滤器"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Lu Jingxiang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/02/25/%E4%BD%8D%E5%9B%BE-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8-%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE/">http://example.com/2024/02/25/%E4%BD%8D%E5%9B%BE-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8-%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Lu Jingxiang's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/26/%E5%B9%B6%E6%9F%A5%E9%9B%86/" title="并查集"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">并查集</div></div></a></div><div class="next-post pull-right"><a href="/2024/02/23/%E7%BA%A2%E9%BB%91%E6%A0%91/" title="红黑树"><img class="cover" src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402231612915.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">红黑树</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/02/18/map%E5%92%8Cset/" title="Map和Set"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-18</div><div class="title">Map和Set</div></div></a></div><div><a href="/2024/02/04/%E4%BA%8C%E5%8F%89%E6%A0%91/" title="二叉树"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-04</div><div class="title">二叉树</div></div></a></div><div><a href="/2024/02/26/%E5%B9%B6%E6%9F%A5%E9%9B%86/" title="并查集"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-26</div><div class="title">并查集</div></div></a></div><div><a href="/2024/02/04/%E6%8E%92%E5%BA%8F/" title="排序"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-04</div><div class="title">排序</div></div></a></div><div><a href="/2024/02/23/%E7%BA%A2%E9%BB%91%E6%A0%91/" title="红黑树"><img class="cover" src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402231612915.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-23</div><div class="title">红黑树</div></div></a></div><div><a href="/2024/02/04/%E9%A1%BA%E5%BA%8F%E8%A1%A8/" title="顺序表"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-04</div><div class="title">顺序表</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Lu Jingxiang</div><div class="author-info__description">Language: Java</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1067367579"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/1067367579" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1067367579@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%8D%E5%9B%BE-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8-%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E9%9D%A2%E8%AF%95%E9%A2%98-%E3%80%90%E5%93%88%E5%B8%8C%E7%9A%84%E5%BA%94%E7%94%A8%E3%80%91"><span class="toc-number">1.</span> <span class="toc-text">位图&amp;布隆过滤器&amp;海量数据面试题 【哈希的应用】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BitSet%E6%A6%82%E5%BF%B5%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0%EF%BC%9A"><span class="toc-number">1.0.1.</span> <span class="toc-text">BitSet概念及自定义实现：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BitSet%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A"><span class="toc-number">1.0.2.</span> <span class="toc-text">BitSet的应用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%9A"><span class="toc-number">1.0.3.</span> <span class="toc-text">布隆过滤器：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">自己实现一个布隆过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%88%A0%E9%99%A4%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">布隆过滤器的删除：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">1.3.</span> <span class="toc-text">布隆过滤器的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E7%BC%BA%E9%99%B7"><span class="toc-number">1.4.</span> <span class="toc-text">布隆过滤器缺陷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A"><span class="toc-number">1.5.</span> <span class="toc-text">布隆过滤器的使用场景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%EF%BC%9A"><span class="toc-number">1.6.</span> <span class="toc-text">简单总结一下：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A"><span class="toc-number">1.7.</span> <span class="toc-text">海量数据面试题：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E5%88%87%E5%89%B2%EF%BC%9A"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">哈希切割：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%8D%E5%9B%BE%E5%BA%94%E7%94%A8%EF%BC%9A"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">位图应用：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%9A-1"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">布隆过滤器：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%BF%E4%B9%A6%EF%BC%9A"><span class="toc-number">1.8.</span> <span class="toc-text">板书：</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/26/%E5%B9%B6%E6%9F%A5%E9%9B%86/" title="并查集">并查集</a><time datetime="2024-02-26T11:21:40.000Z" title="发表于 2024-02-26 19:21:40">2024-02-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/25/%E4%BD%8D%E5%9B%BE-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8-%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE/" title="位图&amp;布隆过滤器&amp;海量数据">位图&amp;布隆过滤器&amp;海量数据</a><time datetime="2024-02-25T12:51:36.000Z" title="发表于 2024-02-25 20:51:36">2024-02-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/23/%E7%BA%A2%E9%BB%91%E6%A0%91/" title="红黑树"><img src="https://raw.githubusercontent.com/1067367579/picgophotos/main/img/202402231612915.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="红黑树"/></a><div class="content"><a class="title" href="/2024/02/23/%E7%BA%A2%E9%BB%91%E6%A0%91/" title="红黑树">红黑树</a><time datetime="2024-02-23T03:49:22.000Z" title="发表于 2024-02-23 11:49:22">2024-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/22/AVL%E6%A0%91-%E4%BA%8C%E5%8F%89%E5%B9%B3%E8%A1%A1%E6%A0%91/" title="AVL树:二叉平衡树">AVL树:二叉平衡树</a><time datetime="2024-02-22T08:52:32.000Z" title="发表于 2024-02-22 16:52:32">2024-02-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/19/%E5%8F%8D%E5%B0%84%E6%9E%9A%E4%B8%BELambda-JavaSE%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E4%B9%A0/" title="反射枚举Lambda+JavaSE与数据结构复习">反射枚举Lambda+JavaSE与数据结构复习</a><time datetime="2024-02-19T14:37:36.000Z" title="发表于 2024-02-19 22:37:36">2024-02-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Lu Jingxiang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>